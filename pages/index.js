import { Carousel, Col, Row, Menu, Button } from 'antd'
import React from 'react';
import Head from 'next/head'
import Link from 'next/link';
import IMG from 'next/image';

import { MenuUnfoldOutlined, MenuFoldOutlined, } from '@ant-design/icons';
import styles from '../styles/Home.module.css'

function getItem(label, key, icon, children, type) {
  return { key,icon,children,label,type, };
}

const items = [
  getItem('فروشگاه ▼', '2', null, [getItem(<Link href='/test'>سبد خرید</Link>, '21'), getItem('پرداخت', '22')]),
  getItem(<Link href='/nazarSanji'>نظر سنجی</Link>, '3'),
  getItem(<Link href='/ggg'>چت روم</Link>, '4'),
  getItem('پزشکی ▼', '5', null, [getItem('معاینات و چک آپ منظم پزشکی', '51'), getItem('ارتباط با درمانگاها', '52')]),
  getItem('آموزش ▼', '6', null, [getItem('مشاوره کسب و کار', '61'), getItem('مشاوره کنکور', '62')]),
  getItem('آکادمی فولاد ▼', '7', null, [getItem('سبد خرید', '71'), getItem('پرداخت', '72')]),
  getItem(<Link href='/pricing'>باشگاه مشتریان</Link>, '8'),
  getItem('رزرو هتل ▼', '9', null, [getItem('هتل مرات مشهد', '91'), getItem('هتل ملیسا مشهد', '92')]),
  getItem(<Link href='/foolad'>پنل کاربری</Link>, '10'),
];

export default function Home( props ) {
  console.log(props.media);
  console.log(props);
  const contentStyle = {
    height: '160px',
    color: '#fff',
    lineHeight: '160px',
    textAlign: 'center',
    background: '#364d79',
  };
  const [collapsed, setCollapsed] = React.useState(false);

  const toggleCollapsed = () => {
    setCollapsed(!collapsed);
  };

  return (
    <div className={styles.container}>
      <Head>
        <title>مرات یار</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Row>
        <Col span={5} >
          <div style={{widthy: 220,}}>
            <Menu
              defaultSelectedKeys={['2']}
              defaultOpenKeys={['9']}
              mode="inline" theme="dark"
              inlineCollapsed={collapsed}
              items={items} />
            <Button type="primary" onClick={toggleCollapsed} style={{marginTop: 6,}}>
              {collapsed ? <MenuUnfoldOutlined /> : <MenuFoldOutlined />}
            </Button>

          </div>
        </Col>
        <Col span={18} style={{marginRight:'9px'}} >
          <Carousel autoplay>
            {
              props.media.map((p, i) => (
                <div key={i} style={{textAlign:'center'}} >
                    <IMG src={p.media_details.sizes.medium_large.source_url} alt={p.slug} height={300} width={700} />
                    <br />
                    <a href={p.link}> {p.title.rendered} </a>
                </div>
            ))
            }
          </Carousel>
          <Carousel autoplay>
            {
              props.posts.map((post, i) => (
                <div key={i}>
                  <h4 style={contentStyle} > { post.title.rendered } </h4>
                  
                </div>
              ))
            }
          </Carousel>
        </Col>
      </Row>
      <Row>
        <Col span={8}>
            aaaaaaaaaaaa
        </Col>
      </Row>
      
    </div>
  )
}

export async function getStaticProps(ctx) {
    // let dev = process.env.NODE_ENV !== 'production';
    // let { DEV_URL, PROD_URL } = process.env;
    // let response = await fetch(`${dev ? DEV_URL : PROD_URL}/api/posts`);
    // let data = await response.json();
    const res = await fetch('http://meratkish.ir/wp-json/wp/v2/posts');
    const posts = await res.json();
    const res2 = await fetch('http://meratkish.ir/wp-json/wp/v2/media');
    const media = await res2.json();
    return {
        // props: { posts: data['message'], },
        // props: { posts: [{'title': 'avali'},{'title': 'dovom'},{'title': 'sevom'}], },
        props: { posts, media },
    };
}
